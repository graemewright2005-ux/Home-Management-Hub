<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shopping List | Home Hub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary: #667eea;
            --primary-dark: #764ba2;
            --gradient: linear-gradient(135deg,#a4befe 0%, #f0b7a4 100%);
            --bg: #f7f9fc;
            --card: #fff;
            --text: #17263a;
            --text-dim: #6a7fa7;
            --border: #e3e6f2;
            --accent: #e37b38;
            --btn: #f4b586;
            --btn-hover: #e37b38;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height:100vh;
        }
        .nav { background: var(--card); border-bottom: 1px solid var(--border); padding: 1rem 1.5rem;}
        .nav-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;}
        .nav-brand { font-size: 1.5rem; font-weight: 800; background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;}
        .nav-menu { display: flex; gap: 0.5rem; list-style: none;}
        .nav-menu a { padding:0.6rem 1.2rem; border-radius:8px; text-decoration:none; color:var(--text-dim); font-weight:600; font-size:0.95rem;}
        .nav-menu a:hover { background: rgba(102,126,234,0.12); color:var(--primary);}
        .nav-menu a.active { background: var(--gradient); color:#fff;}
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem 1.5rem;}
        h1 { font-size:2rem; background:var(--gradient); -webkit-background-clip:text; -webkit-text-fill-color:transparent; margin: 0;}
        .top-controls { display: flex; gap: 1.1em; align-items: center; margin-bottom: 1.7em; flex-wrap: wrap;}
        .shopping-card {
            background: var(--card);
            border: 1.5px solid var(--border);
            border-radius: 16px;
            margin-bottom:2rem;
            padding:1.4em 1.9em;
            box-shadow:0 3px 16px #cfe8fc35;
        }
        .shopping-title {font-size:1.5em;font-weight:800;margin-bottom:1em;background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
        .btn, .btn-primary {
            padding:0.78em 1.3em;
            border-radius:8px;
            font-weight:600;
            border:none;
            background: var(--gradient);
            color:#fff;
            font-size:1em;
            transition: background 0.19s;
            cursor:pointer;
        }
        .btn:hover { background: linear-gradient(120deg, var(--btn-hover) 0%, #f1d8ff 100%);}
        .btn-danger {
            background: linear-gradient(120deg,#e37b38 30%, #fdb6b6 100%);
            color: #fff;
        }
        .btn-danger:hover { background: linear-gradient(90deg,#d51b1b 0%, #ffadad 100%);}
        .btn-secondary{
            background:#e3eafe;
            color:#764ba2;
            border:1.5px solid var(--border);
        }
        .btn-secondary:hover{background:var(--gradient);color:#24213d;}
        /* List styling */
        .shopping-list {margin:2em 0;}
        .shopping-item {
            display:flex;align-items:center;gap:1.2em;
            background:#f7f6fb;
            border:1px solid var(--border);
            border-radius:8px;
            padding:0.8em 1.2em;
            margin-bottom:0.68em;
            box-shadow:0 1px 4px #e3eaf841;
        }
        .shopping-name {
            font-weight:700;
            color:#e27c22;
            font-size:1.11em;
            flex:1 1 auto;
        }
        .shopping-qty {
            color:#6a7fa7;
            background:#fff7ef;
            font-size:1em;
            border-radius:5px;
            padding:0.21em 0.64em;
            font-weight:600;
        }
        .shopping-delete {
            background: linear-gradient(120deg,#e37b38 30%, #fdb6b6 100%);
            border:none;
            color:#fff;
            border-radius:7px;
            font-size:1.13em;
            cursor:pointer;
            padding:0.43em 1.12em;
            transition:background 0.15s;
        }
        .shopping-delete:hover {background: linear-gradient(90deg,#d51b1b 0%, #ffadad 100%);}
        .input-row {display:flex;gap:0.6em;margin-top:1.5em;margin-bottom:0.5em;}
        .input-row input[type="text"], .input-row input[type="number"] {
            font-size:1em;
            padding:0.54em 1em;
            border-radius:8px;
            border:1.2px solid var(--border);
            background:#f6faff;
            color:#17263a;
        }
        .input-row input[type="text"]:focus, .input-row input[type="number"]:focus {
            outline:none;
            border-color: #764ba2;
            background:#e3eafe;
        }
        /* Data management buttons */
        .data-mgmt-row {
            display:flex;gap:1.1em;margin-top:2.7em;margin-bottom:0.22em;align-items:center;
        }
        .shopping-section-sub {
            color: var(--primary-dark); font-size:1.08em; font-weight:700; margin-bottom:0.21em; margin-top:1.4em;
        }
        /* Cleaning supplies section styling */
        .cleaning-card {
            background: #f8f8fd;
            border: 1.2px solid var(--border);
            border-radius:15px;
            padding:1.3em 1.5em;
            margin-top:2em;
            box-shadow:0 2px 12px #cfe8fc22;
        }
        .cleaning-title {font-size:1.18em;font-weight:800;color:#6a7fa7; margin-bottom:0.5em;}
        .cleaning-list-item {
            display:flex;align-items:center;justify-content:space-between;margin-bottom:0.44em;font-size:1.02em;
            padding:0.18em 0.2em;border-radius:7px;
            background:#f6faff;
            color:#e27c22;
        }
        .cleaning-list-remove {
            color:#fff;
            background: linear-gradient(120deg,#e37b38 30%, #fdb6b6 100%);
            border:none;
            border-radius:6px;
            font-size:0.97em;
            cursor:pointer;
            padding:0.14em 0.75em;
        }
        .cleaning-list-remove:hover {background: linear-gradient(90deg,#d51b1b 0%, #ffadad 100%);}
        .empty { color: var(--text-dim); font-size:1.065rem; margin-top:2em; text-align:center;}
    </style>
</head>
<body>
<nav class="nav" aria-label="Main navigation">
    <div class="nav-content">
        <div class="nav-brand">üè† Home Hub</div>
        <ul class="nav-menu" id="navMenu">
            <li><a href="../index.html">üìä Dashboard</a></li>
            <li><a href="meals.html">üçΩÔ∏è Meals</a></li>
            <li><a href="planner.html">üìÖ Planner</a></li>
            <li><a href="shopping.html" class="active">üõí Shopping</a></li>
            <li><a href="cleaning.html">üßπ Cleaning</a></li>
            <li><a href="maintenance.html">üõ†Ô∏è Maintenance</a></li>
            <li><a href="settings.html">‚öôÔ∏è Settings</a></li>
        </ul>
    </div>
</nav>
<div class="container">
    <div class="shopping-card">
        <div class="shopping-title">Shopping List</div>
        <form id="shoppingForm" onsubmit="addShoppingItem(event)">
            <div class="input-row">
                <input type="text" id="shoppingInput" aria-label="Add item" placeholder="E.g. Bagels, Eggs..." autocomplete="off" required>
                <input type="number" id="shoppingQty" aria-label="Quantity" placeholder="Qty" min="1" step="1" value="1">
                <button class="btn btn-primary" type="submit">Add Item</button>
            </div>
        </form>
        <div class="shopping-list" id="shoppingList"></div>
        <div class="empty" id="emptyShopping" style="display:none;">No items added yet.</div>
        <div class="data-mgmt-row">
            <button class="btn-secondary" onclick="exportShoppingJSON()">‚¨áÔ∏è Export as JSON Backup</button>
            <button class="btn-secondary" onclick="importShoppingJSON()">‚¨ÜÔ∏è Import Backup</button>
            <button class="btn-danger" onclick="clearAll()">üóëÔ∏è Clear All</button>
        </div>
        <div style="color: var(--text-dim); font-size:0.98em; margin-top:1em;">
            <em>Clearing will also remove Cleaning Supplies.</em>
        </div>
    </div>
    <div class="cleaning-card">
        <div class="cleaning-title">Cleaning Supplies List</div>
        <form id="cleaningForm" onsubmit="addCleaningSupply(event)">
            <div class="input-row">
                <input type="text" id="cleaningInput" aria-label="Add supply" placeholder="E.g. Toilet Duck, Spray..." autocomplete="off">
                <button class="btn btn-primary" type="submit">Add Supply</button>
            </div>
        </form>
        <div id="cleaningList"></div>
        <div class="empty" id="emptyCleaning" style="display:none;">No cleaning supplies added.</div>
    </div>
</div>
<script>
// --- Shopping List ---
function getShopping() {
    return JSON.parse(localStorage.getItem('hubShopping') || "[]");
}
function saveShopping(list) {
    localStorage.setItem('hubShopping', JSON.stringify(list));
}
function addShoppingItem(event){
    event.preventDefault();
    let val = document.getElementById('shoppingInput').value.trim();
    let qty = parseInt(document.getElementById('shoppingQty').value, 10) || 1;
    if(!val) return;
    let list = getShopping();
    let idx = list.findIndex(x => x.name.toLowerCase() === val.toLowerCase());
    if(idx>=0){
        list[idx].qty = (list[idx].qty||1) + qty;
    } else {
        list.push({name:val,qty:qty,checked:false,fav:false});
    }
    saveShopping(list);
    renderShoppingList();
    document.getElementById('shoppingForm').reset();
}
function renderShoppingList() {
    const list = getShopping();
    const div = document.getElementById('shoppingList');
    if(list.length===0){
        div.innerHTML = '';
        document.getElementById('emptyShopping').style.display = 'block';
        return;
    }
    document.getElementById('emptyShopping').style.display = 'none';
    div.innerHTML = list.map((item,idx)=>
        `<div class="shopping-item">
            <span class="shopping-name">${item.name}</span>
            <span class="shopping-qty">x${item.qty}</span>
            <button class="shopping-delete" onclick="deleteShoppingItem(${idx})">Remove</button>
        </div>`
    ).join('');
}
function deleteShoppingItem(idx){
    let list = getShopping();
    list.splice(idx,1);
    saveShopping(list);
    renderShoppingList();
}
function exportShoppingJSON(){
    let data = {
        shopping: getShopping(),
        cleaning: getCleaningSupplies()
    };
    let blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
    let url = URL.createObjectURL(blob);
    let a = document.createElement("a");
    a.href = url; a.download = "home_hub_backup.json";
    a.click();
}
function importShoppingJSON(){
    let input = document.createElement('input');
    input.type='file'; input.accept='application/json';
    input.onchange = function(evt){
        let file = evt.target.files[0];
        if(!file) return;
        let reader = new FileReader();
        reader.onload = function(e){
            try{
                let data = JSON.parse(e.target.result);
                if(data.shopping) saveShopping(data.shopping);
                if(data.cleaning) saveCleaningSupplies(data.cleaning);
                renderShoppingList(); renderCleaningSupplies();
            }catch(er){}
        };
        reader.readAsText(file);
    };
    input.click();
}
function clearAll(){
    if(confirm("Are you sure you want to clear all shopping and cleaning data?")){
        localStorage.removeItem('hubShopping');
        localStorage.removeItem('hubCleaningEquipment'); // This line clears the cleaning tab supplies!
        renderShoppingList();
        renderCleaningSupplies();
    }
}
// --- Cleaning Supplies ---
function getCleaningSupplies() {
    return JSON.parse(localStorage.getItem('hubCleaningEquipment') || "[]");
}
function saveCleaningSupplies(list) {
    localStorage.setItem('hubCleaningEquipment', JSON.stringify(list));
}
function addCleaningSupply(event){
    event.preventDefault();
    let val = document.getElementById('cleaningInput').value.trim();
    if(!val) return;
    let list = getCleaningSupplies();
    if(!list.includes(val)) list.push(val);
    saveCleaningSupplies(list);
    renderCleaningSupplies();
    document.getElementById('cleaningForm').reset();
}
function deleteCleaningSupply(idx){
    let list = getCleaningSupplies();
    list.splice(idx,1);
    saveCleaningSupplies(list);
    renderCleaningSupplies();
}
function renderCleaningSupplies(){
    const list = getCleaningSupplies();
    const div = document.getElementById('cleaningList');
    if(list.length===0){
        div.innerHTML = '';
        document.getElementById('emptyCleaning').style.display = 'block';
        return;
    }
    document.getElementById('emptyCleaning').style.display = 'none';
    div.innerHTML = list.map((item,idx)=>`
        <div class="cleaning-list-item">
            <span>${item}</span>
            <button class="cleaning-list-remove" onclick="deleteCleaningSupply(${idx})">Remove</button>
        </div>
    `).join('');
}
// --- Page load ---
window.addEventListener('DOMContentLoaded',()=>{
    renderShoppingList();
    renderCleaningSupplies();
});
</script>
</body>
</html>
