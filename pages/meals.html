<!-- ... existing HTML ... -->
<div class="task-cards-container" id="maintenanceCards"></div>
<script>
// ... existing JS ...

// Show task cards for selected room
function showTaskCardsByRoom() {
    const room = document.getElementById('roomDropdown').value;
    const container = document.getElementById('maintenanceCards');
    container.innerHTML = '';
    if (!room) return;
    let roomTasks = RECOMMENDED_TASKS.filter(t => t.area === room);
    if (roomTasks.length === 0) {
        container.innerHTML = `<div style="color:var(--text-dim);margin:2em;text-align:center;">No recommended maintenance tasks for ${room}.</div>`;
        return;
    }
    roomTasks.forEach((task, idx) => {
        container.innerHTML += `
            <div class="task-card" show>
                <div class="task-title">${task.title}</div>
                <div class="task-type">${task.type} &bull; ${task.frequency} &bull; <span class="area-tag">${task.area}</span></div>
                <div class="task-desc">${task.desc}</div>
                <div><strong>Routine:</strong> ${task.routine}</div>
                <div style="margin-top:0.5em;"><strong>Instructions:</strong>
                    <ul style="color:var(--text-dim);font-size:0.97em;margin-top:0.3em;">
                        ${task.instructions.map(i=>`<li>${i}</li>`).join('')}
                    </ul>
                </div>
                <div class="task-actions">
                    <div>
                        <select id="plannerDay${idx}">
                            <option value="">Day...</option>
                            <option>Sunday</option>
                            <option>Monday</option>
                            <option>Tuesday</option>
                            <option>Wednesday</option>
                            <option>Thursday</option>
                            <option>Friday</option>
                            <option>Saturday</option>
                        </select>
                        <select id="plannerTime${idx}">
                            <option value="">Time...</option>
                            <option>Breakfast</option>
                            <option>Lunch</option>
                            <option>Dinner</option>
                            <option>Snack</option>
                        </select>
                        <button class="task-card-btn" onclick="addTaskCardToPlanner(${idx})">Add to Planner</button>
                    </div>
                </div>
            </div>
        `;
    });
}

// Add card task to weekly planner (uses localStorage 'hubPlanner')
function addTaskCardToPlanner(idx) {
    const room = document.getElementById('roomDropdown').value;
    let task = RECOMMENDED_TASKS.filter(t => t.area === room)[idx];
    if (!task) return;
    const day = document.getElementById(`plannerDay${idx}`).value;
    const time = document.getElementById(`plannerTime${idx}`).value;
    if (!day || !time) {
        alert("Please select a day and a meal time for this maintenance task.");
        return;
    }
    // Get planner structure, store in 'hubPlanner'
    let planner = JSON.parse(localStorage.getItem('hubPlanner') || "[]");
    while (planner.length < 7) planner.push({slots: {}});
    let dayIdx = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(day);
    if (dayIdx < 0) return;
    if (!planner[dayIdx].slots) planner[dayIdx].slots = {};
    planner[dayIdx].slots[time] = {...task, from: "maintenance"};
    localStorage.setItem('hubPlanner', JSON.stringify(planner));
    alert(`Added "${task.title}" to planner for ${day} / ${time}`);
}

// ... existing window.onload, calendar etc. unchanged ...
</script>
